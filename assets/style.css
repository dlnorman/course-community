/* ═══════════════════════════════════════════════════════════════════════════
   Course Community — Warm Commons Design System
   Aesthetic: academic hearth / editorial warmth
   Fonts: Fraunces (display) + Plus Jakarta Sans (body)
═══════════════════════════════════════════════════════════════════════════ */

/* ── Variables ───────────────────────────────────────────────────────────── */
:root {
    /* Backgrounds */
    --bg-base:       #F2F0EA;
    --bg-surface:    #FFFFFF;
    --bg-sidebar:    #1C2035;
    --bg-sidebar-h:  #242840;
    --bg-tint:       #F8F6F2;
    --bg-overlay:    rgba(28, 32, 53, 0.6);

    /* Borders */
    --border:        #E3DFD5;
    --border-dark:   #CBC6BB;

    /* Text */
    --text-primary:  #1A1D2E;
    --text-secondary:#5E6278;
    --text-muted:    #9899B0;
    --text-inverse:  #EEF0F8;
    --text-sidebar:  #A8AECA;
    --text-sidebar-a:#FFFFFF;

    /* Accent */
    --accent:        #C84B10;   /* terra cotta */
    --accent-light:  #F06B35;
    --accent-tint:   #FDF1EC;
    --accent-2:      #3D5FA0;   /* indigo */
    --accent-2-light:#6B8FD4;
    --accent-2-tint: #EDF2FB;
    --accent-3:      #4A7E58;   /* sage */
    --accent-3-tint: #EDF5F0;
    --warn:          #C47B14;
    --warn-tint:     #FDF6EC;
    --success:       #2E7D52;
    --success-tint:  #EDF7F2;
    --error:         #C0392B;
    --error-tint:    #FDECEA;

    /* Space type colors */
    --clr-announcement: #C84B10;
    --clr-discussion:   #3D5FA0;
    --clr-qa:           #4A7E58;
    --clr-resources:    #7B5EA7;
    --clr-kudos:        #B8732E;
    --clr-collaboration:#2E7D6B;

    /* Elevation */
    --shadow-sm:  0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
    --shadow-md:  0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
    --shadow-lg:  0 8px 32px rgba(0,0,0,0.12), 0 4px 8px rgba(0,0,0,0.06);
    --shadow-xl:  0 16px 48px rgba(0,0,0,0.16);

    /* Radius */
    --r-sm: 6px;
    --r-md: 10px;
    --r-lg: 16px;
    --r-xl: 24px;
    --r-pill: 999px;

    /* Transitions */
    --t-fast:   150ms ease;
    --t-normal: 240ms ease;
    --t-slow:   400ms ease;

    /* Layout */
    --sidebar-w: 240px;
    --panel-w:   288px;
    --topbar-h:  60px;
}

/* ── Reset ───────────────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { height: 100%; font-size: 15px; }

body {
    font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
    background: var(--bg-base);
    color: var(--text-primary);
    min-height: 100%;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
}

a { color: var(--accent-2); text-decoration: none; }
a:hover { text-decoration: underline; }
img { max-width: 100%; display: block; }
button { cursor: pointer; border: none; background: none; font: inherit; }
input, textarea { font: inherit; }
hr { border: none; border-top: 1px solid var(--border); }
:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

/* Skip-to-content link for keyboard users */
.skip-link {
    position: absolute;
    left: -9999px;
    top: 1rem;
    z-index: 99999;
    background: var(--accent);
    color: white;
    padding: 0.5rem 1.25rem;
    border-radius: 8px;
    font-weight: 700;
    font-size: 0.875rem;
    text-decoration: none;
}
.skip-link:focus {
    left: 1rem;
}
::selection { background: var(--accent-tint); color: var(--accent); }

/* ── Scrollbar ───────────────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border-dark); border-radius: 99px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

/* ── Loading screen ──────────────────────────────────────────────────────── */
.app-loading {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 100vh; gap: 1.5rem;
    background: var(--bg-sidebar);
    animation: fadeIn 0.3s ease;
}
.loading-logo {
    display: flex; align-items: center; gap: 0.75rem;
    color: var(--text-inverse); font-size: 1.25rem; font-weight: 600;
}
.loading-mark {
    font-size: 2rem; color: var(--accent-light);
    animation: spin 2s linear infinite;
    display: inline-block;
}
@keyframes spin { to { transform: rotate(360deg); } }
.loading-bar {
    width: 200px; height: 3px; background: rgba(255,255,255,0.1); border-radius: 99px;
    overflow: hidden;
}
.loading-fill {
    height: 100%; width: 40%; background: var(--accent-light); border-radius: 99px;
    animation: loadSlide 1.2s ease-in-out infinite;
}
@keyframes loadSlide {
    0%   { transform: translateX(-150%); }
    100% { transform: translateX(400%); }
}

/* ── App Layout ──────────────────────────────────────────────────────────── */
#app { min-height: 100vh; }

.app-layout {
    display: grid;
    grid-template-columns: var(--sidebar-w) 1fr var(--panel-w);
    grid-template-rows: var(--topbar-h) 1fr;
    min-height: 100vh;
    animation: fadeIn 0.4s ease;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* ── Topbar ──────────────────────────────────────────────────────────────── */
.topbar {
    grid-column: 1 / -1;
    grid-row: 1;
    display: flex; align-items: center;
    background: var(--bg-sidebar);
    padding: 0 1.25rem;
    gap: 1rem;
    position: sticky; top: 0; z-index: 100;
    border-bottom: 1px solid rgba(255,255,255,0.06);
}
.topbar-logo {
    display: flex; align-items: center; gap: 0.6rem;
    color: var(--text-inverse); font-weight: 700;
    font-size: 1rem; letter-spacing: -0.01em; white-space: nowrap;
    width: calc(var(--sidebar-w) - 1.25rem);
}
.topbar-logo .logo-mark {
    font-size: 1.4rem; color: var(--accent-light); line-height: 1;
}
.topbar-course {
    flex: 1; min-width: 0;
    display: flex; align-items: center; gap: 0.75rem;
}
.topbar-course-label {
    background: rgba(255,255,255,0.08);
    color: var(--text-sidebar);
    font-size: 0.75rem; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase;
    padding: 0.25rem 0.6rem; border-radius: var(--r-sm);
}
.topbar-course-name {
    color: var(--text-inverse); font-size: 0.95rem; font-weight: 500;
    overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.topbar-actions {
    display: flex; align-items: center; gap: 0.5rem;
    margin-left: auto;
}
.topbar-btn {
    width: 36px; height: 36px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    color: var(--text-sidebar); font-size: 1.15rem;
    transition: background var(--t-fast), color var(--t-fast);
    position: relative;
}
.topbar-btn:hover { background: rgba(255,255,255,0.08); color: var(--text-inverse); }
.notif-badge {
    position: absolute; top: 4px; right: 4px;
    background: var(--accent-light); color: white;
    font-size: 0.6rem; font-weight: 700; line-height: 1;
    min-width: 14px; height: 14px; border-radius: 99px;
    display: flex; align-items: center; justify-content: center; padding: 0 3px;
}
.avatar-btn {
    width: 34px; height: 34px; border-radius: 50%;
    overflow: hidden; flex-shrink: 0;
    transition: box-shadow var(--t-fast);
}
.avatar-btn:hover { box-shadow: 0 0 0 2px var(--accent-light); }
.avatar-btn img { width: 100%; height: 100%; object-fit: cover; }
.avatar-initials {
    width: 100%; height: 100%;
    background: var(--accent); color: white;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.75rem; font-weight: 700; letter-spacing: 0.02em;
    text-transform: uppercase;
}

/* ── Sidebar ─────────────────────────────────────────────────────────────── */
.sidebar {
    grid-row: 2;
    background: var(--bg-sidebar);
    display: flex; flex-direction: column;
    overflow-y: auto;
    position: sticky; top: var(--topbar-h); height: calc(100vh - var(--topbar-h));
    padding: 0.75rem 0;
}
.sidebar-section { padding: 0 0.75rem 0.5rem; }
.sidebar-section-label {
    font-size: 0.68rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase;
    color: var(--text-sidebar); opacity: 0.5;
    padding: 0.75rem 0.5rem 0.25rem;
}
.sidebar-item {
    display: flex; align-items: center; gap: 0.6rem;
    padding: 0.5rem 0.75rem; border-radius: var(--r-md);
    color: var(--text-sidebar); font-size: 0.875rem; font-weight: 500;
    transition: background var(--t-fast), color var(--t-fast);
    cursor: pointer; user-select: none; white-space: nowrap;
    overflow: hidden; text-overflow: ellipsis;
}
.sidebar-item:hover { background: var(--bg-sidebar-h); color: var(--text-inverse); }
.sidebar-item.active {
    background: rgba(200, 75, 16, 0.2);
    color: var(--accent-light);
}
.sidebar-icon { font-size: 1rem; width: 1.2rem; text-align: center; flex-shrink: 0; }
.sidebar-divider { border-top: 1px solid rgba(255,255,255,0.06); margin: 0.5rem 0.75rem; }
.sidebar-item-count {
    margin-left: auto; background: rgba(255,255,255,0.08);
    color: var(--text-sidebar); font-size: 0.7rem; font-weight: 600;
    padding: 1px 7px; border-radius: 99px;
}

/* ── Main content ────────────────────────────────────────────────────────── */
.main {
    grid-row: 2;
    display: flex; flex-direction: column;
    min-height: calc(100vh - var(--topbar-h));
    overflow: auto;
}
.main-inner {
    max-width: 760px; width: 100%;
    margin: 0 auto;
    padding: 2rem 1.5rem;
    flex: 1;
}

/* ── Right panel ─────────────────────────────────────────────────────────── */
.panel {
    grid-row: 2;
    display: flex; flex-direction: column; gap: 1.5rem;
    padding: 1.5rem 1.25rem;
    overflow-y: auto;
    position: sticky; top: var(--topbar-h); height: calc(100vh - var(--topbar-h));
    border-left: 1px solid var(--border);
}
.panel-card {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: var(--r-lg);
    overflow: hidden;
}
.panel-card-header {
    padding: 0.875rem 1rem;
    font-size: 0.75rem; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase;
    color: var(--text-muted); border-bottom: 1px solid var(--border);
}
.panel-card-body { padding: 0.75rem 1rem; }

/* ── Page headers ────────────────────────────────────────────────────────── */
.page-header {
    display: flex; align-items: flex-start; justify-content: space-between;
    gap: 1rem; margin-bottom: 1.5rem;
}
.page-header-left { min-width: 0; }
.page-title {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 1.875rem; font-weight: 600; line-height: 1.2;
    color: var(--text-primary); letter-spacing: -0.02em;
}
.page-subtitle { color: var(--text-secondary); margin-top: 0.25rem; font-size: 0.9rem; }
.space-badge {
    display: inline-flex; align-items: center; gap: 0.35rem;
    padding: 0.2rem 0.6rem; border-radius: var(--r-pill);
    font-size: 0.75rem; font-weight: 600; letter-spacing: 0.02em;
    background: var(--accent-tint); color: var(--accent);
}

/* ── Tabs / Filters ──────────────────────────────────────────────────────── */
.tabs {
    display: flex; gap: 0.25rem;
    background: var(--bg-tint); border: 1px solid var(--border);
    padding: 0.25rem; border-radius: var(--r-lg); margin-bottom: 1.5rem;
}
.tab {
    flex: 1; text-align: center;
    padding: 0.5rem 1rem; border-radius: var(--r-md);
    font-size: 0.8rem; font-weight: 600; letter-spacing: 0.02em;
    color: var(--text-secondary); transition: all var(--t-fast);
}
.tab:hover { color: var(--text-primary); background: rgba(0,0,0,0.04); }
.tab.active {
    background: var(--bg-surface); color: var(--text-primary);
    box-shadow: var(--shadow-sm);
}

/* ── Buttons ─────────────────────────────────────────────────────────────── */
.btn {
    display: inline-flex; align-items: center; justify-content: center; gap: 0.4rem;
    padding: 0.5rem 1.1rem; border-radius: var(--r-md);
    font-size: 0.875rem; font-weight: 600;
    transition: all var(--t-fast); user-select: none;
    white-space: nowrap; cursor: pointer;
}
.btn-primary {
    background: var(--accent); color: white;
    box-shadow: 0 2px 6px rgba(200,75,16,0.3);
}
.btn-primary:hover { background: var(--accent-light); box-shadow: 0 4px 12px rgba(200,75,16,0.4); }
.btn-secondary {
    background: var(--bg-surface); color: var(--text-primary);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
}
.btn-secondary:hover { background: var(--bg-tint); border-color: var(--border-dark); }
.btn-ghost {
    color: var(--text-secondary);
    padding: 0.4rem 0.75rem;
}
.btn-ghost:hover { background: var(--bg-tint); color: var(--text-primary); }
.btn-sm { padding: 0.35rem 0.75rem; font-size: 0.8rem; }
.btn-icon { padding: 0.5rem; }
.btn-danger { background: var(--error-tint); color: var(--error); }
.btn-danger:hover { background: var(--error); color: white; }

/* ── Post compose bar ────────────────────────────────────────────────────── */
.compose-bar {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: var(--r-lg);
    padding: 0.875rem 1rem;
    display: flex; align-items: center; gap: 0.75rem;
    margin-bottom: 1.25rem;
    cursor: pointer;
    transition: box-shadow var(--t-fast), border-color var(--t-fast);
    text-align: left;
    width: 100%;
    font: inherit;
}
.compose-bar:hover { box-shadow: var(--shadow-md); border-color: var(--border-dark); }
.compose-bar .compose-avatar { width: 36px; height: 36px; border-radius: 50%; flex-shrink: 0; overflow: hidden; }
.compose-bar .compose-placeholder {
    flex: 1; color: var(--text-muted);
    font-size: 0.9rem; padding: 0.1rem 0;
}
.compose-types { display: flex; gap: 0.4rem; }
.compose-type-btn {
    padding: 0.3rem 0.6rem; border-radius: var(--r-pill);
    font-size: 0.75rem; font-weight: 600; color: var(--text-secondary);
    border: 1px solid var(--border);
    transition: all var(--t-fast);
}
.compose-type-btn:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-tint); }

/* ── Post cards ──────────────────────────────────────────────────────────── */
.post-list { display: flex; flex-direction: column; gap: 1px; }
.post-card {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: var(--r-lg);
    padding: 1.125rem 1.25rem;
    transition: box-shadow var(--t-fast), border-color var(--t-fast), transform var(--t-fast);
    cursor: pointer;
    margin-bottom: 0.75rem;
    position: relative;
    animation: slideUp 0.3s ease both;
}
@keyframes slideUp {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
}
.post-card:hover { box-shadow: var(--shadow-md); border-color: var(--border-dark); transform: translateY(-1px); }
.post-card.pinned { border-left: 3px solid var(--warn); }
.post-card.featured { border-left: 3px solid var(--accent-2); }

.post-card-header {
    display: flex; align-items: center; gap: 0.5rem;
    margin-bottom: 0.625rem; flex-wrap: wrap;
}
.post-type-badge {
    display: inline-flex; align-items: center; gap: 0.3rem;
    padding: 0.2rem 0.55rem; border-radius: var(--r-pill);
    font-size: 0.68rem; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase;
}
.type-discussion { background: var(--accent-2-tint); color: var(--accent-2); }
.type-question   { background: var(--accent-3-tint); color: var(--accent-3); }
.type-resource   { background: #F3EEFF; color: #7B5EA7; }
.type-kudos      { background: #FEF3E2; color: #B8732E; }
.type-reflection { background: #FFF0F0; color: #C04040; }
.type-poll       { background: #F0F8FF; color: #2872A8; }
.type-announcement { background: var(--accent-tint); color: var(--accent); }

.post-space-badge {
    display: inline-flex; align-items: center; gap: 0.3rem;
    font-size: 0.75rem; color: var(--text-muted);
}
.post-pins { display: flex; gap: 0.3rem; margin-left: auto; }
.pin-icon  { font-size: 0.8rem; opacity: 0.7; }

.post-title {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 1.1rem; font-weight: 500; line-height: 1.35;
    color: var(--text-primary); letter-spacing: -0.01em;
    margin-bottom: 0.4rem;
}
.post-card.resolved .post-title::after {
    content: ' ✓'; color: var(--success); font-size: 0.85em;
    font-family: 'Plus Jakarta Sans', sans-serif;
}
.post-excerpt {
    color: var(--text-secondary); font-size: 0.875rem; line-height: 1.55;
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
    overflow: hidden; margin-bottom: 0.75rem;
}

.post-meta {
    display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap;
}
.post-author { display: flex; align-items: center; gap: 0.4rem; }
.post-author-avatar { width: 22px; height: 22px; border-radius: 50%; overflow: hidden; flex-shrink: 0; }
.post-author-name { font-size: 0.8rem; font-weight: 600; color: var(--text-secondary); }
.post-time { font-size: 0.78rem; color: var(--text-muted); }
.post-stats { display: flex; align-items: center; gap: 0.6rem; margin-left: auto; }
.post-stat { display: flex; align-items: center; gap: 0.25rem; font-size: 0.78rem; color: var(--text-muted); }
.post-reactions-preview { display: flex; gap: 0.2rem; }
.reaction-pill {
    display: inline-flex; align-items: center; gap: 0.2rem;
    background: var(--bg-tint); border: 1px solid var(--border);
    padding: 0.15rem 0.45rem; border-radius: var(--r-pill);
    font-size: 0.8rem; color: var(--text-secondary); cursor: pointer;
    transition: all var(--t-fast);
}
.reaction-pill:hover, .reaction-pill.mine { background: var(--accent-tint); border-color: var(--accent); color: var(--accent); }

/* Special post types */
.post-card.type-kudos { background: linear-gradient(135deg, #FFFBF2 0%, #FFF5E5 100%); }
.post-card.type-kudos .post-title { color: #8B4A10; }

.resource-link {
    display: flex; align-items: center; gap: 0.75rem;
    background: var(--bg-tint); border: 1px solid var(--border);
    border-radius: var(--r-md); padding: 0.75rem 1rem;
    margin-top: 0.625rem; text-decoration: none;
    transition: all var(--t-fast); color: var(--text-primary);
}
.resource-link:hover { border-color: var(--accent-2); background: var(--accent-2-tint); }
.resource-domain { font-size: 0.75rem; color: var(--text-muted); }
.resource-title-link { font-weight: 600; font-size: 0.875rem; color: var(--accent-2); }

/* Poll inline */
.poll-preview {
    background: var(--bg-tint); border: 1px solid var(--border);
    border-radius: var(--r-md); padding: 0.875rem 1rem; margin-top: 0.625rem;
}
.poll-option {
    margin-bottom: 0.6rem; position: relative;
    border-radius: var(--r-sm); overflow: hidden;
    cursor: pointer;
}
.poll-option:last-child { margin-bottom: 0; }
.poll-bar {
    position: absolute; left: 0; top: 0; bottom: 0;
    background: var(--accent-2-tint); transition: width 0.4s ease;
    border-radius: var(--r-sm);
}
.poll-option-inner {
    position: relative; z-index: 1;
    display: flex; justify-content: space-between; align-items: center;
    padding: 0.5rem 0.75rem;
    font-size: 0.85rem;
    border: 1px solid var(--border); border-radius: var(--r-sm);
    background: transparent; transition: border-color var(--t-fast);
}
.poll-option:hover .poll-option-inner { border-color: var(--accent-2); }
.poll-option.voted .poll-option-inner { border-color: var(--accent-2); font-weight: 600; }
.poll-option.selected .poll-bar { background: var(--accent-2-tint); }
.poll-pct { font-size: 0.78rem; color: var(--text-muted); font-weight: 600; }
.poll-total { font-size: 0.78rem; color: var(--text-muted); margin-top: 0.5rem; text-align: right; }

/* ── Post detail ─────────────────────────────────────────────────────────── */
.post-detail { animation: slideUp 0.3s ease; }
.post-detail-header { margin-bottom: 1.5rem; }
.post-detail-title {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 2rem; font-weight: 600; line-height: 1.25;
    letter-spacing: -0.02em; margin: 0.75rem 0 1rem;
}
.post-detail-content {
    font-size: 0.95rem; line-height: 1.75; color: var(--text-primary);
    margin-bottom: 1.25rem;
}
.post-detail-content p { margin-bottom: 0.75em; }
.post-detail-content strong { font-weight: 700; }
.post-detail-content em { font-style: italic; }
.post-detail-content code { font-family: 'JetBrains Mono', monospace; font-size: 0.875em;
    background: var(--bg-tint); border: 1px solid var(--border); padding: 0.1em 0.4em; border-radius: var(--r-sm); }
.post-detail-content pre { background: var(--bg-tint); border: 1px solid var(--border);
    border-radius: var(--r-md); padding: 1rem; overflow-x: auto; margin: 1rem 0; }
.post-detail-content blockquote {
    border-left: 3px solid var(--accent); padding-left: 1rem;
    color: var(--text-secondary); font-style: italic; margin: 1rem 0;
}

.post-actions {
    display: flex; align-items: center; gap: 0.5rem;
    padding: 0.875rem 0; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border);
    margin-bottom: 1.5rem; flex-wrap: wrap;
}
.vote-group { display: flex; align-items: center; gap: 0.25rem; }
.vote-btn {
    width: 32px; height: 32px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.9rem; color: var(--text-muted);
    transition: all var(--t-fast);
    border: 1px solid var(--border);
}
.vote-btn:hover { background: var(--bg-tint); color: var(--text-primary); }
.vote-btn.up.active { background: var(--accent-3-tint); border-color: var(--accent-3); color: var(--accent-3); }
.vote-btn.down.active { background: var(--error-tint); border-color: var(--error); color: var(--error); }
.vote-count { font-size: 0.875rem; font-weight: 700; color: var(--text-primary); min-width: 1.5rem; text-align: center; }

.reaction-bar { display: flex; gap: 0.3rem; flex-wrap: wrap; }
.add-reaction-btn {
    padding: 0.25rem 0.6rem; border-radius: var(--r-pill);
    font-size: 0.8rem; color: var(--text-muted); border: 1px dashed var(--border);
    transition: all var(--t-fast);
}
.add-reaction-btn:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-tint); }
.emoji-picker {
    position: absolute; z-index: 200;
    background: var(--bg-surface); border: 1px solid var(--border); border-radius: var(--r-lg);
    padding: 0.5rem; display: flex; gap: 0.3rem; flex-wrap: wrap;
    box-shadow: var(--shadow-lg);
}
.emoji-option { font-size: 1.2rem; padding: 0.3rem; border-radius: var(--r-sm); cursor: pointer; transition: background var(--t-fast); }
.emoji-option:hover { background: var(--bg-tint); }

.instructor-actions { margin-left: auto; display: flex; gap: 0.5rem; }

/* ── Comments ─────────────────────────────────────────────────────────────── */
.comments-section { }
.comments-header {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 1.2rem; font-weight: 500; margin-bottom: 1.25rem;
    color: var(--text-primary);
}
.comment {
    display: flex; gap: 0.875rem;
    padding: 1rem 0; border-bottom: 1px solid var(--border);
    animation: slideUp 0.25s ease;
}
.comment:last-child { border-bottom: none; }
.comment-avatar { width: 34px; height: 34px; border-radius: 50%; overflow: hidden; flex-shrink: 0; margin-top: 2px; }
.comment-body { flex: 1; min-width: 0; }
.comment-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.35rem; flex-wrap: wrap; }
.comment-author { font-weight: 700; font-size: 0.875rem; }
.comment-time { font-size: 0.775rem; color: var(--text-muted); }
.comment-answer-badge {
    display: inline-flex; align-items: center; gap: 0.3rem;
    background: var(--success-tint); color: var(--success);
    font-size: 0.7rem; font-weight: 700; letter-spacing: 0.04em; text-transform: uppercase;
    padding: 0.15rem 0.5rem; border-radius: var(--r-pill);
}
.instructor-note-badge {
    background: var(--accent-2-tint); color: var(--accent-2);
    font-size: 0.7rem; font-weight: 700; letter-spacing: 0.04em;
    padding: 0.15rem 0.5rem; border-radius: var(--r-pill); text-transform: uppercase;
}
.comment-content { font-size: 0.9rem; line-height: 1.65; color: var(--text-primary); white-space: pre-wrap; }
.comment-actions {
    display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;
}
.comment-action-btn {
    font-size: 0.775rem; font-weight: 600; color: var(--text-muted);
    padding: 0.2rem 0.5rem; border-radius: var(--r-sm);
    transition: all var(--t-fast);
}
.comment-action-btn:hover { background: var(--bg-tint); color: var(--text-primary); }
.comment-action-btn.upvoted { color: var(--accent-3); }
.comment.is-answer {
    background: var(--success-tint); border-radius: var(--r-md);
    padding: 1rem; margin-bottom: 0.5rem; border-bottom: none;
}
.replies { margin-left: 2.5rem; border-left: 2px solid var(--border); padding-left: 1rem; margin-top: 0.5rem; }

/* ── Comment composer ─────────────────────────────────────────────────────── */
.comment-composer {
    background: var(--bg-tint); border: 1px solid var(--border);
    border-radius: var(--r-lg); padding: 1rem; margin-top: 1.5rem;
}
.composer-textarea {
    width: 100%; border: 1px solid var(--border); border-radius: var(--r-md);
    padding: 0.75rem 1rem; font-size: 0.9rem; line-height: 1.6;
    background: var(--bg-surface); color: var(--text-primary);
    resize: vertical; min-height: 90px;
    transition: border-color var(--t-fast);
}
.composer-textarea:focus { outline: none; border-color: var(--accent); }
.composer-footer { display: flex; align-items: center; justify-content: flex-end; gap: 0.5rem; margin-top: 0.75rem; }

/* ── Post compose modal ──────────────────────────────────────────────────── */
.modal-overlay {
    position: fixed; inset: 0; z-index: 1000;
    background: var(--bg-overlay);
    display: flex; align-items: center; justify-content: center;
    padding: 1rem;
    animation: fadeIn 0.15s ease;
}
.modal {
    background: var(--bg-surface); border-radius: var(--r-xl);
    width: 100%; max-width: 680px; max-height: 90vh;
    overflow-y: auto;
    box-shadow: var(--shadow-xl);
    animation: slideUp 0.25s ease;
}
.modal-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--border);
    position: sticky; top: 0; background: var(--bg-surface); z-index: 1;
}
.modal-title {
    font-family: 'Fraunces', Georgia, serif;
    font-size: 1.25rem; font-weight: 600;
}
.modal-close {
    width: 32px; height: 32px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    color: var(--text-muted); font-size: 1.2rem;
    transition: all var(--t-fast);
}
.modal-close:hover { background: var(--bg-tint); color: var(--text-primary); }
.modal-body { padding: 1.5rem; }
.modal-footer {
    padding: 1rem 1.5rem; border-top: 1px solid var(--border);
    display: flex; justify-content: flex-end; gap: 0.75rem;
    position: sticky; bottom: 0; background: var(--bg-surface);
}

/* Form elements */
.form-group { margin-bottom: 1.25rem; }
.form-label {
    display: block; font-size: 0.8rem; font-weight: 700; letter-spacing: 0.04em;
    text-transform: uppercase; color: var(--text-muted); margin-bottom: 0.4rem;
}
.form-input, .form-textarea, .form-select {
    width: 100%; padding: 0.65rem 0.875rem;
    border: 1px solid var(--border); border-radius: var(--r-md);
    font: inherit; font-size: 0.9rem; color: var(--text-primary);
    background: var(--bg-surface);
    transition: border-color var(--t-fast), box-shadow var(--t-fast);
}
.form-input:focus, .form-textarea:focus, .form-select:focus {
    outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(200,75,16,0.1);
}
.form-textarea { resize: vertical; min-height: 120px; line-height: 1.6; }
.form-hint { font-size: 0.78rem; color: var(--text-muted); margin-top: 0.35rem; }

.type-selector {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin-bottom: 1.25rem;
}
.type-option {
    display: flex; flex-direction: column; align-items: center; gap: 0.3rem;
    padding: 0.75rem; border-radius: var(--r-md); border: 2px solid var(--border);
    cursor: pointer; transition: all var(--t-fast); text-align: center;
}
.type-option:hover { border-color: var(--accent); background: var(--accent-tint); }
.type-option.selected { border-color: var(--accent); background: var(--accent-tint); }
.type-option-icon { font-size: 1.5rem; }
.type-option-label { font-size: 0.75rem; font-weight: 700; color: var(--text-secondary); }
.type-option.selected .type-option-label { color: var(--accent); }

.space-selector {
    display: flex; gap: 0.4rem; flex-wrap: wrap;
}
.space-option {
    display: flex; align-items: center; gap: 0.35rem;
    padding: 0.35rem 0.75rem; border-radius: var(--r-pill);
    border: 1px solid var(--border); font-size: 0.8rem; font-weight: 600;
    cursor: pointer; transition: all var(--t-fast); color: var(--text-secondary);
}
.space-option:hover { border-color: var(--accent-2); color: var(--accent-2); background: var(--accent-2-tint); }
.space-option.selected { border-color: var(--accent-2); color: var(--accent-2); background: var(--accent-2-tint); }

/* Poll builder */
.poll-options-builder { display: flex; flex-direction: column; gap: 0.5rem; }
.poll-option-row { display: flex; gap: 0.5rem; align-items: center; }
.poll-option-input { flex: 1; padding: 0.5rem 0.75rem; border: 1px solid var(--border); border-radius: var(--r-md); font: inherit; font-size: 0.875rem; }
.poll-option-input:focus { outline: none; border-color: var(--accent); }
.poll-remove-btn { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--text-muted); font-size: 0.9rem; }
.poll-remove-btn:hover { background: var(--error-tint); color: var(--error); }
.add-option-btn { align-self: flex-start; font-size: 0.8rem; color: var(--accent-2); font-weight: 600; padding: 0.3rem 0; }

/* ── Collaboration Board ──────────────────────────────────────────────────── */
.board-view { display: flex; flex-direction: column; height: calc(100vh - var(--topbar-h) - 4rem); }
.board-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; }
.board-canvas-wrap {
    flex: 1; overflow: auto;
    border: 1px solid var(--border); border-radius: var(--r-lg);
    background: var(--bg-tint);
    background-image:
        radial-gradient(circle, var(--border-dark) 1px, transparent 1px);
    background-size: 28px 28px;
    position: relative; min-height: 500px;
}
.board-canvas { position: relative; width: 1200px; height: 800px; }
.sticky-card {
    position: absolute; width: 200px;
    padding: 0.875rem 1rem;
    border-radius: var(--r-md);
    box-shadow: var(--shadow-md);
    cursor: grab; user-select: none;
    transition: box-shadow var(--t-fast), transform var(--t-fast);
    border: 1px solid rgba(0,0,0,0.06);
}
.sticky-card:hover { box-shadow: var(--shadow-lg); transform: rotate(-0.5deg) scale(1.02); }
.sticky-card:active { cursor: grabbing; }
.sticky-card.dragging { box-shadow: var(--shadow-xl); transform: rotate(1.5deg) scale(1.04); z-index: 100; }
.sticky-content { font-size: 0.875rem; line-height: 1.55; word-break: break-word; }
.sticky-footer { display: flex; align-items: center; justify-content: space-between; margin-top: 0.625rem; }
.sticky-author { font-size: 0.72rem; font-weight: 600; opacity: 0.6; }
.sticky-vote-btn { display: flex; align-items: center; gap: 0.25rem; font-size: 0.78rem; font-weight: 700; opacity: 0.6; transition: opacity var(--t-fast); }
.sticky-vote-btn:hover { opacity: 1; }
.sticky-vote-btn.voted { opacity: 1; color: var(--accent); }
.board-add-zone {
    position: absolute; bottom: 1rem; right: 1rem;
}
.board-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem; }
.board-list-card {
    background: var(--bg-surface); border: 1px solid var(--border);
    border-radius: var(--r-lg); padding: 1.25rem;
    cursor: pointer; transition: all var(--t-fast);
}
.board-list-card:hover { box-shadow: var(--shadow-md); border-color: var(--accent-3); transform: translateY(-2px); }
.board-list-title { font-family: 'Fraunces', Georgia, serif; font-size: 1.1rem; font-weight: 500; margin-bottom: 0.4rem; }
.board-list-desc { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem; }
.board-list-meta { display: flex; align-items: center; gap: 0.5rem; font-size: 0.78rem; color: var(--text-muted); }

/* ── Members ─────────────────────────────────────────────────────────────── */
.members-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 0.75rem; }
.member-card {
    background: var(--bg-surface); border: 1px solid var(--border);
    border-radius: var(--r-lg); padding: 1.25rem; text-align: center;
    cursor: pointer; transition: all var(--t-fast);
}
.member-card:hover { box-shadow: var(--shadow-md); border-color: var(--accent-2); transform: translateY(-2px); }
.member-avatar { width: 56px; height: 56px; border-radius: 50%; margin: 0 auto 0.75rem; overflow: hidden; }
.member-name { font-weight: 700; font-size: 0.9rem; margin-bottom: 0.2rem; }
.member-role { font-size: 0.75rem; color: var(--text-muted); text-transform: capitalize; }
.member-stats { display: flex; justify-content: center; gap: 1rem; margin-top: 0.625rem; }
.member-stat { font-size: 0.75rem; color: var(--text-secondary); text-align: center; }
.member-stat strong { display: block; font-size: 1rem; color: var(--text-primary); }
.instructor-badge {
    display: inline-flex; align-items: center; gap: 0.25rem;
    background: var(--accent-tint); color: var(--accent);
    font-size: 0.68rem; font-weight: 700; letter-spacing: 0.04em; text-transform: uppercase;
    padding: 0.2rem 0.5rem; border-radius: var(--r-pill); margin-bottom: 0.25rem;
}

/* ── Profile modal ───────────────────────────────────────────────────────── */
.profile-header { display: flex; align-items: flex-start; gap: 1.25rem; margin-bottom: 1.25rem; }
.profile-avatar { width: 72px; height: 72px; border-radius: 50%; overflow: hidden; flex-shrink: 0; }
.profile-info { flex: 1; }
.profile-name { font-family: 'Fraunces', Georgia, serif; font-size: 1.5rem; font-weight: 600; }
.profile-email { font-size: 0.85rem; color: var(--text-muted); }
.profile-bio { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; margin-top: 0.4rem; }
.profile-stats { display: flex; gap: 1.5rem; margin-bottom: 1.25rem; }
.profile-stat { text-align: center; }
.profile-stat-value { font-size: 1.5rem; font-weight: 700; color: var(--text-primary); font-family: 'Fraunces', Georgia, serif; }
.profile-stat-label { font-size: 0.75rem; color: var(--text-muted); }

/* ── Analytics dashboard ─────────────────────────────────────────────────── */
.analytics-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; }
.stat-card {
    background: var(--bg-surface); border: 1px solid var(--border);
    border-radius: var(--r-lg); padding: 1.25rem;
}
.stat-card-value { font-family: 'Fraunces', Georgia, serif; font-size: 2.25rem; font-weight: 600; line-height: 1; margin-bottom: 0.3rem; }
.stat-card-label { font-size: 0.8rem; color: var(--text-muted); font-weight: 600; letter-spacing: 0.03em; text-transform: uppercase; }
.analytics-section { margin-bottom: 1.5rem; }
.analytics-section-title {
    font-family: 'Fraunces', Georgia, serif; font-size: 1.1rem; font-weight: 500;
    margin-bottom: 0.875rem; color: var(--text-primary);
}
.bar-chart { display: flex; flex-direction: column; gap: 0.5rem; }
.bar-item { display: flex; align-items: center; gap: 0.75rem; }
.bar-label { width: 120px; font-size: 0.8rem; color: var(--text-secondary); text-align: right; flex-shrink: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.bar-track { flex: 1; height: 20px; background: var(--bg-tint); border-radius: 4px; overflow: hidden; border: 1px solid var(--border); }
.bar-fill { height: 100%; border-radius: 4px; transition: width 0.5s ease; }
.bar-value { width: 40px; font-size: 0.8rem; color: var(--text-muted); font-weight: 600; }
.silent-list { display: flex; flex-direction: column; gap: 0.5rem; }
.silent-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.625rem; background: var(--warn-tint); border-radius: var(--r-md); font-size: 0.875rem; }
.silent-item-avatar { width: 32px; height: 32px; border-radius: 50%; overflow: hidden; flex-shrink: 0; }
.silent-item-name { font-weight: 600; }
.silent-item-last { font-size: 0.78rem; color: var(--text-muted); margin-left: auto; }

/* ── Notifications panel ─────────────────────────────────────────────────── */
.notif-panel {
    position: fixed; top: var(--topbar-h); right: 0;
    width: 360px; max-height: calc(100vh - var(--topbar-h));
    background: var(--bg-surface); border-left: 1px solid var(--border);
    overflow-y: auto; z-index: 500;
    box-shadow: var(--shadow-xl);
    animation: slideInRight 0.25s ease;
}
@keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to   { transform: translateX(0); opacity: 1; }
}
.notif-panel-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 1rem 1.25rem; border-bottom: 1px solid var(--border); position: sticky; top: 0;
    background: var(--bg-surface);
}
.notif-item {
    display: flex; gap: 0.75rem; padding: 0.875rem 1.25rem;
    border-bottom: 1px solid var(--border); cursor: pointer;
    transition: background var(--t-fast);
}
.notif-item:hover { background: var(--bg-tint); }
.notif-item.unread { background: var(--accent-2-tint); }
.notif-item.unread:hover { background: #dce8f5; }
.notif-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent-2); margin-top: 5px; flex-shrink: 0; }
.notif-text { font-size: 0.875rem; line-height: 1.5; }
.notif-time { font-size: 0.75rem; color: var(--text-muted); margin-top: 0.2rem; }

/* ── Misc / utilities ────────────────────────────────────────────────────── */
.divider { border: none; border-top: 1px solid var(--border); margin: 1.5rem 0; }
.empty-state {
    text-align: center; padding: 3rem 1rem; color: var(--text-muted);
}
.empty-state-icon { font-size: 2.5rem; margin-bottom: 0.75rem; opacity: 0.5; }
.empty-state-title { font-family: 'Fraunces', Georgia, serif; font-size: 1.1rem; font-weight: 500; color: var(--text-secondary); margin-bottom: 0.4rem; }
.empty-state-text { font-size: 0.875rem; }
.back-btn {
    display: inline-flex; align-items: center; gap: 0.4rem;
    font-size: 0.85rem; font-weight: 600; color: var(--text-secondary);
    margin-bottom: 1.25rem; padding: 0.3rem 0;
    transition: color var(--t-fast);
}
.back-btn:hover { color: var(--text-primary); text-decoration: none; }
.tag { display: inline-flex; align-items: center; padding: 0.2rem 0.6rem; border-radius: var(--r-pill); font-size: 0.75rem; font-weight: 600; }
.resolved-banner {
    display: flex; align-items: center; gap: 0.5rem;
    background: var(--success-tint); color: var(--success);
    border-radius: var(--r-md); padding: 0.625rem 1rem;
    font-size: 0.875rem; font-weight: 600; margin-bottom: 1rem;
}
.toast {
    position: fixed; bottom: 1.5rem; left: 50%; transform: translateX(-50%);
    background: var(--text-primary); color: white;
    padding: 0.625rem 1.25rem; border-radius: var(--r-pill);
    font-size: 0.875rem; font-weight: 600; z-index: 2000;
    box-shadow: var(--shadow-lg);
    animation: toastIn 0.3s ease;
}
@keyframes toastIn {
    from { opacity: 0; transform: translateX(-50%) translateY(12px); }
    to   { opacity: 1; transform: translateX(-50%) translateY(0); }
}
.spinner {
    width: 20px; height: 20px; border-radius: 50%;
    border: 2px solid var(--border);
    border-top-color: var(--accent);
    animation: spin 0.7s linear infinite;
    display: inline-block;
}
.loading-inline { display: flex; align-items: center; justify-content: center; gap: 0.75rem; padding: 2rem; color: var(--text-muted); font-size: 0.875rem; }

/* Activity heat dots for right panel */
.pulse-dots { display: flex; gap: 3px; flex-wrap: wrap; }
.pulse-dot {
    width: 10px; height: 10px; border-radius: 2px;
    background: var(--border);
}
.pulse-dot.d1 { background: #DCEDC8; }
.pulse-dot.d2 { background: #AED581; }
.pulse-dot.d3 { background: #7CB342; }
.pulse-dot.d4 { background: #558B2F; }

/* Panel member list */
.panel-member { display: flex; align-items: center; gap: 0.625rem; padding: 0.4rem 0; }
.panel-member-avatar { width: 28px; height: 28px; border-radius: 50%; overflow: hidden; flex-shrink: 0; }
.panel-member-name { font-size: 0.8rem; font-weight: 600; }
.panel-member-role { font-size: 0.72rem; color: var(--text-muted); }
.online-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--success); margin-left: auto; flex-shrink: 0; }

/* Back-to-feed link in breadcrumb */
.breadcrumb { display: flex; align-items: center; gap: 0.4rem; font-size: 0.8rem; color: var(--text-muted); margin-bottom: 1rem; }
.breadcrumb a { color: var(--text-secondary); font-weight: 600; }
.breadcrumb a:hover { color: var(--text-primary); }
.breadcrumb-sep { color: var(--border-dark); }

/* ── Responsive ──────────────────────────────────────────────────────────── */
@media (max-width: 1100px) {
    .app-layout { grid-template-columns: var(--sidebar-w) 1fr; }
    .panel { display: none; }
}
/* ── Peer Feedback ────────────────────────────────────────────────────────── */

.pf-status-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.2rem 0.65rem;
    border-radius: 100px;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    border: 1px solid;
    white-space: nowrap;
}

/* List */
.pf-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.pf-card {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.25rem 1.5rem;
    transition: box-shadow 0.15s, border-color 0.15s;
}
.pf-card:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    border-color: var(--accent);
}

.pf-card-header { margin-bottom: 0.75rem; }

.pf-card-title-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.pf-card-title {
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.pf-card-desc {
    font-size: 0.875rem;
    color: var(--text-muted);
    margin: 0.35rem 0 0;
    line-height: 1.5;
}

.pf-card-meta {
    display: flex;
    align-items: center;
    gap: 1.25rem;
    font-size: 0.8rem;
    color: var(--text-muted);
    flex-wrap: wrap;
}

.pf-pending-badge {
    color: #E67E22;
    font-weight: 600;
}

.pf-done-badge {
    background: #2ECC7122;
    color: #27AE60;
    border: 1px solid #2ECC7144;
    padding: 0.15rem 0.6rem;
    border-radius: 100px;
    font-size: 0.75rem;
    font-weight: 600;
}

/* Detail page */
.pf-detail { max-width: 860px; }

.pf-detail-header { margin-bottom: 1.5rem; }

.pf-detail-title-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
    margin-top: 0.75rem;
    margin-bottom: 0.25rem;
}

.pf-meta-row {
    display: flex;
    gap: 1.5rem;
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
}

.pf-controls {
    display: flex;
    gap: 0.75rem;
    margin-bottom: 1.25rem;
    flex-wrap: wrap;
}

.pf-info-banner {
    background: #F39C1215;
    border: 1px solid #F39C1240;
    color: #9B6E10;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    font-size: 0.875rem;
    margin-bottom: 1.25rem;
}
.pf-info-banner.success {
    background: #2ECC7115;
    border-color: #2ECC7140;
    color: #1E7B49;
}

.pf-section {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.25rem 1.5rem;
    margin-bottom: 1.25rem;
}

.pf-section-title {
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0 0 1rem;
}

.pf-prompts-list {
    margin: 0;
    padding-left: 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    font-size: 0.9rem;
    color: var(--text-primary);
    line-height: 1.5;
}

/* Submit form */
.pf-submit-tabs {
    display: flex;
    gap: 0;
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
    width: fit-content;
    margin-bottom: 1rem;
}
.pf-submit-tab {
    padding: 0.5rem 1.25rem;
    border: none;
    background: transparent;
    font: inherit;
    font-size: 0.875rem;
    cursor: pointer;
    color: var(--text-muted);
    transition: background 0.15s, color 0.15s;
}
.pf-submit-tab.active {
    background: var(--accent);
    color: white;
}

.pf-file-drop {
    border: 2px dashed var(--border);
    border-radius: 10px;
    padding: 2rem;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
}

.pf-submitted-state {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
    font-size: 0.9rem;
    color: var(--text-secondary);
}
.pf-submitted-text {
    width: 100%;
    background: var(--bg-base);
    padding: 0.75rem 1rem;
    border-radius: 8px;
    font-size: 0.875rem;
    color: var(--text-muted);
    font-style: italic;
    line-height: 1.5;
}

/* Review list */
.pf-review-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}
.pf-review-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--bg-base);
    gap: 1rem;
    flex-wrap: wrap;
}
.pf-review-item.done { opacity: 0.7; }
.pf-review-item-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    font-size: 0.875rem;
}
.pf-review-num { font-weight: 600; color: var(--text-secondary); }
.pf-review-item-status {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-shrink: 0;
}

/* Received feedback */
.pf-response-card {
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 1rem;
}
.pf-response-header {
    background: var(--bg-sidebar);
    color: var(--text-inverse, #fff);
    padding: 0.5rem 1rem;
    font-size: 0.8rem;
    font-weight: 700;
    letter-spacing: 0.05em;
    text-transform: uppercase;
}
.pf-response-prompt {
    padding: 0.75rem 1rem;
    border-top: 1px solid var(--border);
}
.pf-response-prompt:first-of-type { border-top: none; }
.pf-response-prompt-label {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-bottom: 0.35rem;
}
.pf-response-answer {
    font-size: 0.9rem;
    line-height: 1.6;
    color: var(--text-primary);
}

/* Progress */
.pf-progress-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 0.75rem;
}
.pf-progress-label {
    width: 120px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    flex-shrink: 0;
}
.pf-progress-bar {
    flex: 1;
    height: 8px;
    background: var(--bg-base);
    border-radius: 100px;
    overflow: hidden;
    border: 1px solid var(--border);
}
.pf-progress-fill {
    height: 100%;
    background: var(--accent);
    border-radius: 100px;
    transition: width 0.4s ease;
}
.pf-progress-pct {
    width: 60px;
    text-align: right;
    font-size: 0.8rem;
    color: var(--text-muted);
    flex-shrink: 0;
}

/* Progress table */
.pf-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.875rem;
}
.pf-table th {
    text-align: left;
    padding: 0.5rem 0.75rem;
    border-bottom: 2px solid var(--border);
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
    font-weight: 700;
}
.pf-table td {
    padding: 0.6rem 0.75rem;
    border-bottom: 1px solid var(--border);
    color: var(--text-secondary);
}
.pf-table tr:last-child td { border-bottom: none; }

.pf-empty {
    font-size: 0.875rem;
    color: var(--text-muted);
    font-style: italic;
    margin: 0;
}

/* Review page */
.pf-review-page { max-width: 1000px; }

.pf-review-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    align-items: start;
}

.pf-review-submission,
.pf-review-form {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.25rem 1.5rem;
}

.pf-submission-text {
    font-size: 0.9rem;
    line-height: 1.7;
    color: var(--text-primary);
    white-space: pre-wrap;
    word-break: break-word;
}

.pf-file-download {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: var(--bg-base);
    border-radius: 8px;
    border: 1px solid var(--border);
    font-size: 0.875rem;
}

.pf-prompt-field {
    margin-bottom: 1.25rem;
}
.pf-prompt-field-label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
}
.pf-prompt-hint {
    font-weight: 400;
    color: var(--text-muted);
}

/* Create modal prompt rows */
.pf-prompt-row {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    margin-bottom: 0.5rem;
}

.pf-options-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

/* Danger ghost button */
.btn-danger-ghost {
    background: transparent;
    color: #E74C3C;
    border: 1px solid #E74C3C44;
}
.btn-danger-ghost:hover {
    background: #E74C3C15;
    border-color: #E74C3C;
}

@media (max-width: 768px) {
    .pf-review-layout { grid-template-columns: 1fr; }
    .pf-options-grid  { grid-template-columns: 1fr; }
    .pf-progress-label { width: 80px; }
}

/* ── End Peer Feedback ────────────────────────────────────────────────────── */

/* ── Documents ────────────────────────────────────────────────────────────── */

.doc-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.doc-list-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 1rem 1.25rem;
    cursor: pointer;
    transition: border-color 0.15s, box-shadow 0.15s;
}

.doc-list-card:hover {
    border-color: var(--accent);
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.doc-list-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.4rem;
}

.doc-list-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    flex: 1;
}

.doc-list-meta {
    display: flex;
    gap: 1rem;
    font-size: 0.8rem;
    color: var(--text-muted);
}

.doc-badge-private,
.doc-badge-course-view,
.doc-badge-collab,
.doc-badge-public {
    font-size: 0.7rem;
    font-weight: 600;
    border-radius: 4px;
    padding: 1px 7px;
    white-space: nowrap;
    border: 1px solid;
}
.doc-badge-private {
    background: rgba(120, 120, 140, 0.15);
    color: var(--text-muted);
    border-color: rgba(120, 120, 140, 0.3);
}
.doc-badge-course-view {
    background: rgba(66, 133, 244, 0.12);
    color: #6aadff;
    border-color: rgba(66, 133, 244, 0.3);
}
.doc-badge-collab {
    background: rgba(251, 188, 4, 0.12);
    color: #f0b429;
    border-color: rgba(251, 188, 4, 0.3);
}
.doc-badge-public {
    background: rgba(92, 122, 71, 0.2);
    color: #7DBF5A;
    border-color: rgba(92, 122, 71, 0.35);
}

.doc-access-select {
    appearance: none;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    color: var(--text-primary);
    font-size: 0.8rem;
    padding: 0.3rem 0.6rem;
    cursor: pointer;
    outline: none;
}
.doc-access-select:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 1px;
}
.doc-access-select:hover {
    border-color: var(--accent);
}

/* Editor page — full-height layout */
#main-content.in-doc-editor {
    overflow: hidden;
    height: calc(100vh - var(--topbar-h));
}
#main-content.in-doc-editor .main-inner {
    max-width: none;
    padding: 1.5rem;
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}
#main-content.in-doc-editor #view-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
    overflow: hidden;
}
.doc-editor-page {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
}

.doc-editor-topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    margin-bottom: 0.75rem;
    flex-wrap: wrap;
}

.doc-editor-nav {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.doc-editor-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.doc-save-status {
    font-size: 0.8rem;
    color: var(--text-muted);
    min-width: 4rem;
    text-align: right;
}

.doc-presence {
    font-size: 0.8rem;
    color: var(--accent);
    background: rgba(200, 75, 16, 0.1);
    border: 1px solid rgba(200, 75, 16, 0.2);
    border-radius: 20px;
    padding: 2px 10px;
}

.doc-editor-title-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 0.75rem;
}

.doc-title-input {
    flex: 1;
    font-size: 1.4rem;
    font-weight: 700;
    background: transparent;
    border: none;
    border-bottom: 2px solid var(--border);
    color: var(--text-primary);
    padding: 0.25rem 0;
    outline: none;
    transition: border-color 0.15s;
}

.doc-title-input:focus {
    border-bottom-color: var(--accent);
}

.doc-title-input[readonly] {
    cursor: default;
    border-bottom-color: transparent;
}

.doc-readonly-notice {
    background: rgba(120, 120, 140, 0.1);
    border: 1px solid rgba(120, 120, 140, 0.25);
    border-radius: var(--radius);
    padding: 0.6rem 1rem;
    font-size: 0.875rem;
    color: var(--text-muted);
    margin-bottom: 0.75rem;
}
.doc-readonly-notice a {
    color: var(--accent);
    text-underline-offset: 2px;
    word-break: break-all;
}

.doc-conflict-notice {
    background: rgba(231, 76, 60, 0.1);
    border: 1px solid rgba(231, 76, 60, 0.3);
    border-radius: var(--radius);
    padding: 0.6rem 1rem;
    font-size: 0.875rem;
    color: #E74C3C;
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.doc-content-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

/* Override EasyMDE styles to match app theme */
.EasyMDEContainer {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

.EasyMDEContainer .CodeMirror {
    flex: 1;
    background: var(--bg-card);
    border-color: var(--border);
    color: var(--text-primary);
    font-size: 0.9375rem;
    min-height: 300px;
}

.EasyMDEContainer .editor-toolbar {
    background: var(--bg-tint);
    border-color: var(--border);
}

.EasyMDEContainer .editor-toolbar button {
    color: var(--text-secondary);
}

.EasyMDEContainer .editor-toolbar button:hover,
.EasyMDEContainer .editor-toolbar button.active {
    background: var(--bg-card);
    border-color: var(--border);
    color: var(--text-primary);
}

.EasyMDEContainer .editor-toolbar i.separator {
    border-color: var(--border);
}

/* Floating exit button for EasyMDE fullscreen/split-view */
.mde-exit-btn {
    position: fixed;
    top: 0.75rem;
    right: 1rem;
    z-index: 100000;
    background: rgba(20, 20, 28, 0.92);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.18);
    border-radius: 6px;
    padding: 0.35rem 0.85rem;
    font-size: 0.8125rem;
    font-weight: 600;
    cursor: pointer;
    backdrop-filter: blur(6px);
    transition: background 0.15s;
    letter-spacing: 0.02em;
}
.mde-exit-btn:hover {
    background: var(--accent);
    border-color: var(--accent);
}

/* ── End Documents ────────────────────────────────────────────────────────── */

@media (max-width: 768px) {
    :root { --sidebar-w: 0px; }
    .app-layout { grid-template-columns: 1fr; }
    .sidebar { display: none; }
    .main-inner { padding: 1.25rem 1rem; }
    .analytics-grid { grid-template-columns: 1fr; }
    .type-selector { grid-template-columns: repeat(2, 1fr); }
}
